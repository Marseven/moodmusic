import{u as N,j as e,T as t,a3 as g,c as R,V as B,W as j,a2 as P,Z as U,bu as A,y as L,F as E,i as c,ag as w,aK as y,E as u,b3 as S,X as b,m as f,b4 as I,aJ as T,aP as z,r as M,I as D,M as Q,b9 as O,ba as G,bb as V,ap as K,ax as $,at as J,z as W,a9 as H,q as x,aQ as X,as as Y,a4 as Z,bg as ee,bh as l}from"./main-1406e08c.js";import{O as m,i as se,q as C,F as ae,p as te,K as ie,w as re,U as ne,x as ce,y as le,z as me,E as oe,H as ue,J as de}from"./backstage-track-insights-d08cc66a.js";import{O as F,j as xe}from"./play-arrow-filled-8e87b0ae.js";import"./Edit-4fa321e0.js";const je=""+new URL("claim-label-9a476d72.jpg",import.meta.url).href,he=""+new URL("claim-artist-c781927a.jpg",import.meta.url).href;function ge(){const{branding:s}=N(),a=F()!=null;return e.jsx(m,{children:e.jsxs("div",{className:"max-w-780 my:20 md:my-40 mx-auto",children:[e.jsx("h1",{className:"text-3xl md:text-5xl text-center font-medium mb-10",children:e.jsx(t,{message:"Get access to :siteName for artists",values:{siteName:s.site_name}})}),e.jsx("h2",{className:"text-lg font-medium mb-54 text-center",children:e.jsx(t,{message:"First, select the type of your request"})}),e.jsxs("div",{className:"md:flex items-center gap-54",children:[e.jsx(v,{className:"mb-14 md:mb-0",title:a?e.jsx(t,{message:"Get verified"}):e.jsx(t,{message:"Become an artist"}),link:a?"verify-artist":"become-artist",image:he}),e.jsx(v,{title:e.jsx(t,{message:"Claim existing artist"}),link:"claim-artist",image:je})]})]})})}function v({title:s,image:a,link:i,className:r}){return e.jsxs(g,{to:i,className:R("block flex-auto flex flex-col items-center justify-center p-34 border border-2 rounded-md bg-paper transition-shadow hover:shadow-xl hover:bg-primary/4 cursor-pointer",r),children:[e.jsx("h3",{className:"text-lg mb-10 font-medium",children:s}),e.jsx("img",{className:"w-132 h-132 object-cover rounded-full",src:a,alt:""})]})}const _="backstage-request";function pe(s){return B(a=>be(a),{onSuccess:()=>{j.invalidateQueries(se(_))},onError:a=>P(a,s)})}function be(s){var a;return U.post(_,{artist_name:s.artist_name,artist_id:s.artist_id,type:s.type,data:{first_name:s.first_name,last_name:s.last_name,image:s.image,role:s.role,company:s.company,passport_scan_id:(a=s.passportScan)==null?void 0:a.id}}).then(i=>i.data)}function fe(s){const{user:a}=A(),i=F();let r;return s==="verify-artist"?r=i==null?void 0:i.id:s==="become-artist"&&(r="CURRENT_USER"),L({defaultValues:{artist_id:r,artist_name:a==null?void 0:a.display_name,first_name:a==null?void 0:a.first_name,last_name:a==null?void 0:a.last_name,image:(i==null?void 0:i.image)||(a==null?void 0:a.avatar),type:s,role:s==="claim-artist"?"artist":void 0}})}function ve(){return e.jsxs(E,{name:"role",label:e.jsx(t,{message:"Role"}),selectionMode:"single",className:"mb-24",children:[e.jsx(c,{value:"artist",children:e.jsx(t,{message:"Artist"})}),e.jsx(c,{value:"agent",children:e.jsx(t,{message:"Agent"})}),e.jsx(c,{value:"composer",children:e.jsx(t,{message:"Composer"})}),e.jsx(c,{value:"label",children:e.jsx(t,{message:"Label"})}),e.jsx(c,{value:"manager",children:e.jsx(t,{message:"Manager"})}),e.jsx(c,{value:"musician",children:e.jsx(t,{message:"Musician"})}),e.jsx(c,{value:"producer",children:e.jsx(t,{message:"Producer"})}),e.jsx(c,{value:"publisher",children:e.jsx(t,{message:"Publisher"})}),e.jsx(c,{value:"songwriter",children:e.jsx(t,{message:"Songwriter"})})]})}function ke(){var d,p;const{social:s}=N(),{watch:a,setValue:i}=w(),{connectSocial:r}=y(),n=a("passportScan");return e.jsxs("div",{className:"py-20",children:[e.jsx("div",{className:"mb-14 text-sm",children:e.jsx(t,{message:"Speed up the process by connecting artist social media accounts or uploading your passport scan."})}),((d=s==null?void 0:s.twitter)==null?void 0:d.enable)&&e.jsx(u,{variant:"outline",startIcon:e.jsx(S,{className:"text-twitter"}),className:"mr-10 mb-10 md:mb-0",onClick:async()=>{const o=await r("twitter");(o==null?void 0:o.status)==="SUCCESS"&&(j.invalidateQueries(["users"]),b(f("Connected twitter account")))},children:e.jsx(t,{message:"Connect to twitter"})}),((p=s==null?void 0:s.facebook)==null?void 0:p.enable)&&e.jsx(u,{variant:"outline",startIcon:e.jsx(I,{className:"text-facebook"}),className:"mr-10 mb-10 md:mb-0",onClick:async()=>{const o=await r("facebook");(o==null?void 0:o.status)==="SUCCESS"&&(j.invalidateQueries(["users"]),b(f("Connected facebook account")))},children:e.jsx(t,{message:"Connect to facebook"})}),e.jsx(we,{}),e.jsxs("div",{className:"mt-20",children:[n&&e.jsx(q,{icon:e.jsx(C,{}),title:e.jsx(t,{message:"Passport scan"}),description:`${n.name} (${T(n.file_size)})`,onRemove:()=>{i("passportScan",void 0)}}),e.jsx(k,{service:"twitter"}),e.jsx(k,{service:"facebook"})]})]})}function k({service:s}){const{disconnectSocial:a}=y(),{data:i}=z("me",{with:["social_profiles"]}),r=i==null?void 0:i.user.social_profiles.find(n=>n.service_name===s);return r?e.jsx(q,{icon:s==="twitter"?e.jsx(S,{className:"text-twitter"}):e.jsx(I,{className:"text-facebook"}),title:e.jsx("span",{className:"capitalize",children:e.jsx(t,{message:":service account",values:{service:s}})}),description:r.username,isDisabled:a.isLoading,onRemove:()=>{a.mutate({service:"twitter"},{onSuccess:()=>{j.invalidateQueries(["users"])}})}}):null}function q({icon:s,title:a,description:i,onRemove:r,isDisabled:n}){return e.jsxs("div",{className:"flex items-center gap-8 border rounded px-14 py-8 mb-8",children:[e.jsx("div",{className:"flex-shrink-0 text-muted",children:M.cloneElement(s,{size:"lg"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted",children:a}),e.jsx("div",{className:"text-sm",children:i})]}),e.jsx(D,{className:"flex-shrink-0 ml-auto",onClick:()=>r(),disabled:n,children:e.jsx(Q,{})})]})}const Ne=5*1024*1024;function we(){const{setValue:s}=w(),{selectAndUploadFile:a}=O(),i=()=>{a({showToastOnRestrictionFail:!0,restrictions:{allowedFileTypes:[G.image],maxFileSize:Ne},metadata:{disk:V.uploads},onSuccess:r=>{s("passportScan",r)}})};return e.jsx(u,{variant:"outline",startIcon:e.jsx(C,{className:"text-primary"}),onClick:()=>i(),children:e.jsx(t,{message:"Upload passport scan"})})}function h(){const{pathname:s}=K(),a=s.split("/").pop();return e.jsx(m,{children:e.jsxs("div",{className:"max-w-780 my-40 mx-auto",children:[e.jsx("h1",{className:"text-3xl md:text-5xl text-center font-medium",children:e.jsx(t,{message:"Tell us about yourself"})}),e.jsx(ye,{requestType:a})]})})}function ye({requestType:s}){const a=$(),i=fe(s),r=pe(i);return e.jsx(J,{children:e.jsxs(W,{form:i,onSubmit:n=>{r.mutate(n,{onSuccess:d=>{a(`/backstage/requests/${d.request.id}/request-submitted`,{replace:!0})}})},children:[e.jsx(H,{name:"image",diskPrefix:"artist_media",variant:"avatar",previewSize:"w-160 h-160",className:"my-30 max-w-max mx-auto",disabled:s==="become-artist"}),s!=="become-artist"&&e.jsx(ae,{className:"mb-24",label:e.jsx(t,{message:"Select artist"}),name:"artist_id",modelType:xe,openMenuOnFocus:!0,customEndpoint:"search/suggestions",queryParams:{listAll:"true",excludeSelf:"true"},disabled:s==="verify-artist"}),s==="become-artist"&&e.jsx(x,{required:!0,name:"artist_name",label:e.jsx(t,{message:"Your artist name"}),className:"mb-24"}),e.jsxs("div",{className:"md:flex items-center gap-24 mb-24",children:[e.jsx(x,{required:!0,name:"first_name",label:e.jsx(t,{message:"First name"}),className:"flex-auto mb-24 md:mb-0"}),e.jsx(x,{required:!0,name:"last_name",label:e.jsx(t,{message:"Last name"}),className:"flex-auto"})]}),s==="claim-artist"&&e.jsx(ve,{}),e.jsx(x,{name:"company",label:e.jsx(t,{message:"Company (optional)"}),className:"mb-24"}),e.jsx(ke,{}),e.jsxs("div",{className:"flex gap-24 justify-between border-t pt-34",children:[e.jsx(u,{variant:"raised",color:"white",elementType:g,to:"..",relative:"path",className:"min-w-140",radius:"rounded-full",children:e.jsx(t,{message:"Go back"})}),e.jsx(u,{variant:"raised",color:"primary",type:"submit",className:"min-w-140",radius:"rounded-full",disabled:r.isLoading,children:e.jsx(t,{message:"Submit request"})})]})]})})}function Se(){const{data:s,isLoading:a}=te();return a?e.jsx(X,{className:"my-40"}):s!=null&&s.request?e.jsx(m,{children:e.jsx("div",{className:"max-w-[590px] my-40 mx-auto",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-center",children:e.jsx(Z,{size:"text-6xl"})}),e.jsx("h1",{className:"text-5xl font-medium mt-24 mb-48 text-center",children:e.jsx(t,{message:"We've got your request"})}),e.jsxs("ul",{className:"mb-60 list-disc list-inside px-20",children:[e.jsx("li",{className:"pb-10",children:e.jsx(t,{message:"Our support team will review it and send you an email within 3 days!"})}),e.jsx("li",{className:"pb-10",children:e.jsx(t,{message:"Don't submit another request until you hear from us."})}),e.jsx("li",{children:e.jsx(t,{message:` If this artist profile is already claimed, ask an admin on your team
            to invite you.`})})]}),e.jsx("div",{className:"text-center",children:e.jsx(u,{variant:"raised",color:"primary",elementType:g,to:"/",className:"min-w-140",radius:"rounded-full",children:e.jsx(t,{message:"Got It"})})})]})})}):e.jsx(Y,{to:"/"})}const Ie=[{path:"upload",element:e.jsx(l,{permission:"music.create",children:e.jsx(ie,{})})},{path:"requests",element:e.jsx(l,{permission:"backstageRequests.create",children:e.jsx(ge,{})})},{path:"requests/verify-artist",element:e.jsx(l,{permission:"backstageRequests.create",children:e.jsx(h,{})})},{path:"requests/become-artist",element:e.jsx(l,{permission:"backstageRequests.create",children:e.jsx(h,{})})},{path:"requests/claim-artist",element:e.jsx(l,{permission:"backstageRequests.create",children:e.jsx(h,{})})},{path:"requests/:requestId/request-submitted",element:e.jsx(l,{permission:"backstageRequests.create",children:e.jsx(Se,{})})},{path:"tracks/new",element:e.jsx(l,{permission:"music.create",children:e.jsx(m,{children:e.jsx(re,{})})})},{path:"tracks/:trackId/edit",element:e.jsx(m,{children:e.jsx(ne,{})})},{path:"tracks/:trackId/insights",element:e.jsx(ce,{})},{path:"albums/new",element:e.jsx(l,{permission:"music.create",children:e.jsx(m,{children:e.jsx(le,{wrapInContainer:!1})})})},{path:"albums/:albumId/edit",element:e.jsx(m,{children:e.jsx(me,{wrapInContainer:!1})})},{path:"albums/:albumId/insights",element:e.jsx(oe,{})},{path:"artists/:artistId/edit",element:e.jsx(m,{children:e.jsx(ue,{wrapInContainer:!1,showExternalFields:!1})})},{path:"artists/:artistId/insights",element:e.jsx(de,{})}];function Re(){return ee(Ie)}export{Re as default};
//# sourceMappingURL=backstage-routes-d126db1a.js.map
